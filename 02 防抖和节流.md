# 懒加载

## 目录

1 [防抖](#1)

  - [1.1 需求描述](#1.1)

  - [1.2 代码实现](#1.2)


## <span id="1">一  防抖 </span>

### <span id="2.1"> 1.1 需求描述 </span>

1 Q: 什么是防抖

A: 防抖是提高性能的一种方式，常用于优化 一些触发频繁的事件回调

S1 未优化情况下，有一些事件会频繁触发，如AJAX+查询请求/ scroll事件/ onmousemove事件等

S2 防抖的含义是: 让事件回调只有在 最后一次事件触发后的n秒 才执行，中间的触发事件都不响应

S3 类似于招数读条，如果中间再次搓大(触发事件)，则重新读条(重置时间)，直到读满后才会 调用回调响应


2 Q: 根据需求描述，实现防抖的 逻辑步骤是什么

A: S1 接受2个参数: 事件的响应回调 + 不连续触发事件的 最小时间间隔wait(读条时间)

S2 获取当前时间now + 上一次触发事件时的时间prev(初始是0，因为一开始未触发事件)

S3 当 now-prev > wait间隔时间时，则触发 回调函数 + 更新上一次触发事件的时间为 当前时间

S4 当 now-prev < wait时，则忽略事件无任何 回调响应

S5 注意防抖是对 事件的回调处理，所以 返回的是一个函数



### <span id="1.2"> 1.2 代码实现 </span>

1 Q: 根据逻辑步骤，请写出 防抖的 实现代码

S2 实现代码如下

```
function debounce(func, wait){
  let prev = 0
  let now = Date.now()

  return function fn() {
    if (now - prev >= wait){
      func.call()
      prev = Date.now()
    }
  }

}
```



