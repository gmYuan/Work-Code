1 预读文档

01 [使用postcss-write-svg在retina屏绘制1px细线](https://juejin.im/post/5c343d1b6fb9a049e2322e83)


2 Q: 如何实现移动端 1px边框

A:

方法1: ::after + scale

S1 去除原先元素的 border + 相对定位

S2 ::before/::after绝对定位 & 重做border + scale 缩小一半

```css
.scale{
  position: relative;
  border:none;
}
.scale::after{
  content: '';
  position: absolute;
  top: 0;
  left: 0;

  border: 1px solid #000;
  transform: scaleY(0.5);

}
```

方法2: svg + border-image,  这里使用 `postcss-write-svg`插件

S1 安装插件: `npm install jonathantneal/postcss-write-svg --save-dev`

S2 在.postcssrc.js文件中，引入插件:

```js
module.exports = {
  "plugins": {
    "postcss-import": {},
    "postcss-url": {},

    "autoprefixer": {},

    // 新增postcss-write-svg解决移动端1px问题
    "postcss-write-svg": {},

  },
}
```

S3 在common.scss中定义公有的class样式(common.scss一般会在main.js中全局引入)

```scss

// 解决1px问题
@svg 1px-border {
  width: 4px;
  height: 4px;
  @rect {
    fill: transparent;
    width: 100%;
    height: 100%;
    stroke-width: 25%;
    stroke: var(--color, black);
  }
}
.onepx-border {
  //border: 1px solid;
  border-bottom: 1px solid ;
  border-image: svg(1px-border param(--color red)) 1 stretch;
}
```

S4 在需要有1px边框的元素上，直接使用.onepx-border类即可

```html
<div class="onepx-border">
  我是测试
</div>
```

方法3: scale = 1/devicePixelRatio + 设置viewport